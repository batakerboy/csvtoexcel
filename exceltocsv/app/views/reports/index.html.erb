<div class="container">
	<%= render 'noticeAlert'%>
	<div class="jumbotron" align="center">
		<h1>Report Generation</h1>
	</div>

	<%= form_tag import_reports_path, multipart:true, html: {class: "form-horizontal"}  do %>
		<%= label_tag(:biometrics, "Biometrics CSV: ", class: "col-md-2 control-label")%>
			<%= file_field_tag(:biometrics, class: "btn btn-default") %>
		<%= label_tag(:falco, "Falco TXT: ", class: "col-md-2 control-label")%>
			<%= file_field_tag(:falco, class: "btn btn-default") %>
		<%= label_tag(:file, "iEMS CSV: ", class: "col-md-2 control-label")%>
			<%= file_field_tag(:file, class: "btn btn-default")%>
		<%= submit_tag "Upload" %>
	<% end %>
	<br/><br/><br/>
	<h1>Attendance</h1>
	<table id = "table_id">
		<thead>
			<tr>
				<th>Name</th>
				<th>Date</th>
				<th>Time In</th>
				<th>Time Out</th>
			</tr>
		</thead>
		<tbody>
			<%@attendances.each do |attendance|%>
				<tr>
					<td><%= "#{attendance.last_name}, #{attendance.first_name}"%></td>
					<td><%= attendance.attendance_date.to_date.strftime('%m/%d/%Y')%></td>
					<td><%= attendance.time_in.strftime('%H:%M:%S')%></td>
					<%if attendance.time_out.nil? == false%>
						<td><%= attendance.time_out.strftime('%H:%M:%S')%></td>
					<%else%>
						<td><%= attendance.time_out%></td>
					<%end%>
				</tr>
			<%end%>
		</tbody>
	</table>
	<br/><br/><br/>
	<h1>Requests</h1>
	<table id = "table_id2">
		<thead>
			<tr>
				<th>Date</th>
				<th>Day</th>
				<th>Department</th>
				<th>Employee ID</th>
				<th>OT Hours</th>
				<th>UT Time</th>
				<th>Vacation Leave</th>
				<th>Sick Leave</th>
				<th>Official Business</th>
				<th>Remarks</th>
			</tr>
		</thead>
		<tbody>
			<%@requests.each do |request|%>
				<tr>
					<!-- <td><%#= request.date.strftime('%m/%d/%Y')%></td>
					<td><%#= request.date.strftime('%A')%></td> -->
					<td><%= request.date%></td>
					<td><%= request.date%></td>
					<td><%= request.department%></td>
					<td><%= request.employee_id%></td>
					<td><%= request.ot_hours%></td>
					
					<%unless request.ut_time.nil? %>
						<td>0</td>
					<%else%>
						<td><%= request.ut_time.strftime('%H:%M:%S') unless request.ut_time.nil?%></td>
					<%end%>
					
					<td><%= request.vacation_leave%></td>
					<td><%= request.sick_leave%></td>
					<td><%= request.official_business%></td>
					<td><%= request.remarks%></td>
				</tr>
			<%end%>
		</tbody>
	</table>
	<br/><br/><br/>
	<%= link_to 'Download Zipfile', download_zip_reports_path(format: "xls"), class: "btn btn-success"%>
	<br/><br/><br/>
</div>

<script>
  $(function(){
    $("#table_id").dataTable({
    	"aaSorting": [[ 0, "asc" ], [ 1, "asc" ]]
    });
  })
  $(function(){
    $("#table_id2").dataTable({
    	"aaSorting": [[ 3, "asc" ]]
    });
  })
</script>